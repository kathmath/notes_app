var newNoteInput=document.getElementById("new"),addButton=document.querySelector("input.add"),getNotes=function(){var a=[],b=localStorage.getItem("notes");return null!==b&&(a=JSON.parse(b)),a},showNotes=function(){for(var a=getNotes(),b="",c=0;c<a.length;c++){var d='<button class = "edit"></button>',e='<button class = "delete"></button>',f='<input class = "editInput"/>';b+='<li class = "note" id = '+c+"><label>"+a[c]+"</label>"+f+d+e+"</li>"}document.getElementById("myNotes").innerHTML=b,bindNoteEvents(),document.getElementById("new").focus()},addNote=function(){if(""!==newNoteInput.value){var a=newNoteInput.value,b=getNotes();b.push(a),localStorage.setItem("notes",JSON.stringify(b)),showNotes()}newNoteInput.value=""},deleteNote=function(){var a=this.parentNode,b=a.getAttribute("id"),c=getNotes();c.splice(b,1),localStorage.setItem("notes",JSON.stringify(c)),showNotes()},editNote=function(){var a=this.parentNode,b=a.querySelector("input");console.log(b);var c=a.querySelector("label"),d=a.classList.contains("editMode");if(d)a.classList.remove("editMode"),c.innerText=b.value;else{var e=document.querySelectorAll("li.editMode");if(e!==[])for(var f=0;f<e.length;f++)e[f].classList.remove("editMode");a.classList.add("editMode"),b.value=c.innerText,moveCursorToEnd(b)}},moveCursorToEnd=function(a){if("number"==typeof a.selectionStart)a.selectionStart=a.selectionEnd=a.value.length;else if("undefined"!=typeof a.createTextRange){a.focus();var b=a.createTextRange();b.collapse(!1),b.select()}};addButton.onclick=addNote;var bindNoteEvents=function(){for(var a=document.querySelectorAll("button.edit"),b=document.querySelectorAll("button.delete"),c=document.querySelectorAll("label"),d=0;d<a.length;d++)a[d].onclick=editNote;for(var d=0;d<c.length;d++)c[d].onclick=editNote;for(var d=0;d<b.length;d++)b[d].onclick=deleteNote};showNotes();